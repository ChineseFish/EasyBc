(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74694857"],{"05a5":function(t,e,s){"use strict";var a=s("3776"),n=s.n(a);n.a},3556:function(t,e,s){"use strict";function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},n=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),n.forEach(function(e){a(t,e,s[e])})}return t}s.d(e,"a",function(){return n})},3776:function(t,e,s){},5932:function(t,e,s){"use strict";var a=s("5ad1"),n=s.n(a);n.a},"5ad1":function(t,e,s){},7277:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"crumbs"},[s("i",{staticClass:"el-icon-share"}),s("el-breadcrumb",{staticStyle:{"font-size":"18px","line-height":"18px","margin-left":"20px"},attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("span",[t._v(t._s("索引 "+t.currentNode.id))])]),s("el-breadcrumb-item",[s("span",[t._v(t._s("名称 "+t.currentNode.name))])]),s("el-breadcrumb-item",[s("span",[t._v(t._s(t.currentNode.host+":"+t.currentNode.port))])])],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",[s("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("el-card",{staticStyle:{cursor:"pointer"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[s("div",{staticClass:"grid-content grid-con-1",on:{click:function(e){t.type="INFO"}}},[s("i",{staticClass:"el-icon-lx-notice grid-con-icon"}),s("div",{staticClass:"grid-cont-right"},[s("div",{staticClass:"grid-num"},[t._v(t._s(t.infoLogsCount))]),s("div",[t._v("系统消息")])])])])],1),s("el-col",{attrs:{span:6}},[s("el-card",{staticStyle:{cursor:"pointer"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[s("div",{staticClass:"grid-content grid-con-2",on:{click:function(e){t.type="WARNING"}}},[s("i",{staticClass:"el-icon-lx-notice grid-con-icon"}),s("div",{staticClass:"grid-cont-right"},[s("div",{staticClass:"grid-num"},[t._v(t._s(t.warnLogsCount))]),s("div",[t._v("警告消息")])])])])],1),s("el-col",{attrs:{span:6}},[s("el-card",{staticStyle:{cursor:"pointer"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[s("div",{staticClass:"grid-content grid-con-3",on:{click:function(e){t.type="ERROR"}}},[s("i",{staticClass:"el-icon-lx-notice grid-con-icon"}),s("div",{staticClass:"grid-cont-right"},[s("div",{staticClass:"grid-num"},[t._v(t._s(t.errorLogsCount))]),s("div",[t._v("错误提醒")])])])])],1),s("el-col",{attrs:{span:6}},[s("el-card",{staticStyle:{cursor:"pointer"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[s("div",{staticClass:"grid-content grid-con-4",on:{click:function(e){t.type="FATAL"}}},[s("i",{staticClass:"el-icon-lx-notice grid-con-icon"}),s("div",{staticClass:"grid-cont-right"},[s("div",{staticClass:"grid-num"},[t._v(t._s(t.fatalLogsCount))]),s("div",[t._v("报警提醒")])])])])],1)],1),s("v-messages",{directives:[{name:"show",rawName:"v-show",value:"INFO"===t.type,expression:"type === 'INFO'"}],attrs:{type:t.type,logs:t.infoLogs}}),s("v-messages",{directives:[{name:"show",rawName:"v-show",value:"WARNING"===t.type,expression:"type === 'WARNING'"}],attrs:{type:t.type,logs:t.warnLogs}}),s("v-messages",{directives:[{name:"show",rawName:"v-show",value:"ERROR"===t.type,expression:"type === 'ERROR'"}],attrs:{type:t.type,logs:t.errorLogs}}),s("v-messages",{directives:[{name:"show",rawName:"v-show",value:"FATAL"===t.type,expression:"type === 'FATAL'"}],attrs:{type:t.type,logs:t.fatalLogs}})],1)],1)],1)},n=[],o=(s("7415"),s("ea65"),s("3556")),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"crumbs"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("i",{staticClass:"el-icon-lx-notice"}),t._v(t._s(t.type))])],1)],1),s("div",{staticClass:"container"},[s("el-tabs",{model:{value:t.message,callback:function(e){t.message=e},expression:"message"}},[s("el-tab-pane",{attrs:{label:"未读消息("+t.logs.length+")",name:"first"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.logs,"show-header":!1}},[s("el-table-column",{attrs:{prop:"id",width:"60"}}),s("el-table-column",{attrs:{prop:"time",width:"180"}}),s("el-table-column",{attrs:{width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"message-title"},[t._v(t._s(e.row.title))])]}}])}),s("el-table-column",{attrs:{prop:"data"}}),s("el-table-column",{attrs:{width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"small"},on:{click:function(s){return t.handleRead(e.$index)}}},[t._v("标为已读")])]}}])})],1),s("div",{staticClass:"handle-row"},[s("el-button",{attrs:{type:"primary"}},[t._v("全部标为已读")])],1)],1),s("el-tab-pane",{attrs:{label:"已读消息("+t.read.length+")",name:"second"}},["second"===t.message?[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.read,"show-header":!1}},[s("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"message-title"},[t._v(t._s(e.row.title))])]}}],null,!1,1342692326)}),s("el-table-column",{attrs:{prop:"date",width:"150"}}),s("el-table-column",{attrs:{width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"danger"},on:{click:function(s){return t.handleDel(e.$index)}}},[t._v("删除")])]}}],null,!1,3531492676)})],1),s("div",{staticClass:"handle-row"},[s("el-button",{attrs:{type:"danger"}},[t._v("删除全部")])],1)]:t._e()],2),s("el-tab-pane",{attrs:{label:"回收站("+t.recycle.length+")",name:"last"}},["last"===t.message?[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.recycle,"show-header":!1}},[s("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"message-title"},[t._v(t._s(e.row.title))])]}}],null,!1,1342692326)}),s("el-table-column",{attrs:{prop:"date",width:"150"}}),s("el-table-column",{attrs:{width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{on:{click:function(s){return t.handleRestore(e.$index)}}},[t._v("还原")])]}}],null,!1,2505816523)})],1),s("div",{staticClass:"handle-row"},[s("el-button",{attrs:{type:"danger"}},[t._v("清空回收站")])],1)]:t._e()],2)],1)],1)])},i=[],c={name:"messages",props:["type","logs"],data:function(){return{message:"first",read:[{date:"2019-03-19 20:00:00",title:"【系统通知】内网服务器内存达到阀值"}],recycle:[{date:"2019-03-19 20:00:00",title:"【系统通知】蟠桃会服务器CPU使用达到阀值"}]}},created:function(){},methods:{handleRead:function(t){var e=this.logs.splice(t,1);console.log(e),this.read=e.concat(this.read)},handleDel:function(t){var e=this.read.splice(t,1);this.recycle=e.concat(this.recycle)},handleRestore:function(t){var e=this.recycle.splice(t,1);this.read=e.concat(this.read)},onSubmit:function(){this.$message.success("提交成功！")}},computed:{unreadNum:function(){return this.logs.length}}},l=c,d=(s("5932"),s("17cc")),u=Object(d["a"])(l,r,i,!1,null,null,null),g=u.exports,p=s("83c5"),h=s("52c1"),f={name:"dashboard",data:function(){return{switch:!1,type:"INFO",infoLogsCount:0,infoLogs:[],warnLogsCount:0,warnLogs:[],errorLogsCount:0,errorLogs:[],fatalLogsCount:0,fatalLogs:[],currentNode:void 0}},computed:Object(o["a"])({},Object(h["b"])(["unl"])),components:{vMessages:g},methods:{deleteSelectedWarningMessage:function(){},deleteAllWarningMessage:function(){},deleteWarningMessage:function(t){},getCurrentNode:function(){var t=this.$route.path.split("/")[2],e=this.unl.find(function(e){return t==e.id});this.currentNode=e},getLogs:function(t){var e=this;this.$axios.get("/logs",{url:"".concat(this.currentNode.host,":").concat(this.currentNode.port),type:t,offset:0,limit:499}).then(function(s){if(0!==s.code)return e.$message.error("".concat(t,"信息加载错误, ").concat(s.msg));"INFO"===t&&(e.infoLogsCount=s.data.count,e.infoLogs=s.data.logs.map(function(t){return t.time=new Date(parseInt(t.time)).toLocaleString(),t})),"WARNING"===t&&(e.warnLogsCount=s.data.count,e.warnLogs=s.data.logs.map(function(t){return t.time=new Date(parseInt(t.time)).toLocaleString(),t})),"ERROR"===t&&(e.errorLogsCount=s.data.count,e.errorLogs=s.data.logs.map(function(t){return t.time=new Date(parseInt(t.time)).toLocaleString(),t})),"FATAL"===t&&(e.fatalLogsCount=s.data.count,e.fatalLogs=s.data.logs.map(function(t){return t.time=new Date(parseInt(t.time)).toLocaleString(),t}))})}},created:function(){void 0===this.currentNode&&this.getCurrentNode()},watch:{$route:function(t,e){this.switch||(this.getCurrentNode(),this.getLogs("INFO"),this.getLogs("WARNING"),this.getLogs("ERROR"),this.getLogs("FATAL")),this.switch=!1}},activated:function(){this.switch=!0,this.getCurrentNode(),this.$store.commit("switchNavType","node"),this.getLogs("INFO"),this.getLogs("WARNING"),this.getLogs("ERROR"),this.getLogs("FATAL")},deactivated:function(){p["a"].$off("collapse",this.renderCharts)}},m=f,v=(s("05a5"),Object(d["a"])(m,a,n,!1,null,"32619508",null));e["default"]=v.exports},"83c5":function(t,e,s){"use strict";var a=s("6e6d"),n=new a["default"];e["a"]=n}}]);
//# sourceMappingURL=chunk-74694857.a14cf7a4.js.map